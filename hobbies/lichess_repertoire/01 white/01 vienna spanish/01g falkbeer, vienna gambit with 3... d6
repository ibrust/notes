/*  general / positional overview: 
    sometimes if they're pawn storming the queenside early it can be good to block it via a4 and start a kingside attack 
    a3 can also be useful to tuck the bishop away in some cases
    pushing f5 can preempt an attack 
    rotating the queens knight to the kingside like in the ruy lopez is also good at times 
    tactics become very important in many of the positions 
    
    sometimes an attack on the king can fizzle out if their rook is supporting the king, in this case don't abandon the queenside
    
    queenside castling w/ attack can be strong, but remember you don't always have to castle queenside to launch a kingside attack
    especially if you control the center - i.e. the opponents e pawn is no longer defending (like if he retook something exd4)
    or if it seems good to push forward with the f pawn & seal up the kingside 
*/

==============================================================================================
==============================================================================================
// VIENNA GAMBIT, FALKBEER w/ 3... d6
// this can be reached from the pirc and the omaha gambit 

1. e4 e5 2. Nc3 Nf6 3. f4 d6 4. Nf3                    // 21% 

    -------------------------------------------------------------------------------------- 
    --------------------------------------------------------------------------------------
    // DEFENSIVE SETUP, PIN VARIATION 
    // this pin variation is the most common line, but it doesn't score well for black. 5... exf4 is the only okay scoring followup 
    // for the most part the lines are straightforward
    4... Nc6 5. Bb5                     // 41%

        -------------------------------------------
        // this variation looks pretty straightforward - you either develop the bishop naturally or you trade down & are a pawn up 
        5... Bd7 6. d3                                  // 34%, +0.30

            -------------------
            6... exf4 7. Bxf4 

            -------------------
            // mistake, trade down & take the pawn 
            #6... Be7 7. Bxc6 Bxc6 8. fxe5 dxe5 9. Nxe5  // +0.59 

            -------------------
            // mistake, trade down & take the pawn 
            #6... a6 7. Bxc6 Bxc6 8. fxe5 dxe5 9. Nxe5  // +0.95 

            -------------------
            // don't get the pawn but at least you get his bishop 
            6... Nd4 7. Bxd7+ 
                7... Qxd7 8. O-O 
                7... Nxd7 8. Be3 

            -------------------
            // won't be able to take the center pawn anymore, but at least his queen blocks his bishop, just castle 
            // he probably will castle queenside 
            6... Qe7 7. O-O 

        -------------------------------------------
        // just push back the bishop and either trade it off or straightforwardly continue development with d3  
        5... Bg4 6. h3                                  // 33%

            -------------------
            6... Bxf3 7. Qxf3                           // 91%, +0.51 

            -------------------
            6... Bd7 7. d3                              // 9%, +0.45 - looks like 5... Bd7 6. d3 but w/ h3. 
                                                        // provoking h3 doesn't appear to be advantageous 
            
        -------------------------------------------
        // d5 and in many lines you can push d5 too 
        // only noteworthy thing in these lines is you don't trade the lightsquare bishop 
        *5... exf4 6. d4                                  // 26.5%, +0.17 

            6... Bd7 7. Bxf4                            // +0.57

            6... a6 7. Be2                          // +0.20 - interesting, here you don't take. not sure why, but I assume you can still reclaim f4 
                                                    // maybe it's because you want to keep the option of pushing d5, and Bg4 is still a threat 

            6... Be7 7. d5                          // +0.37 

            #6... Bg4 7. d5                          // +1.12 

        -------------------------------------------
        // his move wasn't worth much, just trade down & claim the pawn 
        #5... Be7 6. fxe5 dxe5 7. Bxc6+ bxc6 8. Nxe5      // 5.2%, +0.54

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        // his move wasn't worth much, just trade down & claim the pawn 
        ~#5... a6 6. Bxc6+ bxc6 7. fxe5 dxe5 8. Nxe5      // 1.7%, +0.54 

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        ~#5... Qe2 6. O-O                                 // 1.6%, +0.62 

    -------------------------------------------------------------------------------------- 
    --------------------------------------------------------------------------------------
    // DEFENSIVE SETUP, BISHOP EXCHANGE  
    4... Bg4 5. h6 Bxf3 6. Qxf3                         // 29%

        -------------------------------------------
        // you trade down in pretty much all these lines & ruin their pawns 
        6... Nc6 7. Bb5                 // +0.53

            7... Be7 8. fxe5 dxe5 9. Bxc6+ bxc6 10. O-O         // just trade down & destroy his pawn structure 

            7... a6 8. Bxc6+ bxc6 10. fxe5 dxe6 11. O-O         // again trade down & destroy his pawn structure 

            7... Qd7 8. d3
                8... a6 9. Bxc6 Qxc6 10. Be3            // you're preparing to castle kingside. 
                                                        // it looks like the best way to defend the pawns from the queen 
                    10... Be7 11. O-O-O 
                    10... exf4 11. Qxf4             // Qxf4 - in this case, since the bishop is already developed, 
                                                    // you take back with the queen to retain control of the e3 diagonal 

            // again whatever they do just trade down 
            7... exf4 8. d4 
                8... Nd7 9. Bxc6+ bxc6 10. Bxf4     // +0.59 
                8... a6 9. Bxc6+ bxc6 10. Bxf4      // +1.42

        -------------------------------------------
        *6... Be7 7. fxe4 dxe4 8. Bc4                // +0.20

            8... O-O 9. d3                          // +0.29
            8... Nc6 9. Ne2                         // +0.23 - engine keeps wanting me to rotate the knight in these lines

        -------------------------------------------
        6... Nbd7 7. g4                 // +0.44 - engine likes d3 a bit more, but g4 still scores well, and it's interesting and unique 
            
            // looks like you always push g5 shortly after 
            7... exf4 8. g5  

            *7... Nc4 8. fxe5 dxe5 9. g5 

            7... Be7 8. g5  

        -------------------------------------------
        6... exf4 7. d4                 // +0.61  

            7... Nc6 8. Bb5 - transposes w/ 6... Nc6 7. Bb5 exf4 8. d4 

            #7... g5 8. e5              // +2.07 - here again you tempo the knight & then you can take b7, so they can't really play g5 

    -------------------------------------------------------------------------------------- 
    --------------------------------------------------------------------------------------
    // DEFENSIVE SETUP, PAWN TAKES  
    // you always can reclaim the pawn, some lines require a couple moves to get there 
    // for now the pawn being retaken will be my stopping point. that may change in time, at least for the common lines, we'll see 
    4... exf4 5. d4                     // 12%, +0.35

        5... Be7 6. Bxf4                // +0.41 

        *5... Nh5 6. Nd5 
            
            #6... g5 7. Nxg5 Qxg5 8. Qxh5 Qxh5 9. Nf6+                // 67%, +2.93 - common but bad - forks queen, king moves, 
                                                                        // pawn structure is destroyed and you're up a pawn

            *6... Be7 7. Nxf4                               // noone has played this in the database, it isn't really natural 

            6... Nf3 7. Bxf4            // you can also try a single repetition with Nc3, see if he plays Nh5 again... 

        5... Bg4 6. h3 

            // Qxf3 can be played because they can't reinforce with g5 
            // these lines aren't good for black 
            6... Bxf3 7. Qxf3

                #7... g5 8. e5 Nd7 9. Qxb7

                7... Nc6 8. Bb5 

                    8... a6 9. Bxc6+ bxc6 10. Bxf4 

                    *8... Nd7 9. Bxc6 bxc6 10. Bxf4     // +0.59, and I doubt anyone will ever play this 

                    #8... g5 9. d5          // still can't reinforce, this messes up their queenside 
            
            6... Bh5 7. Bxf4 

        5... Nc6 6. Bxf4

    -------------------------------------------------------------------------------------- 
    --------------------------------------------------------------------------------------
    // DEFENSIVE SETUP, DEFENSIVE KNIGHT 
    4... Nbd7 5. d4                     // 10%, +0.37

        -------------------------------------------
        5... exd4 6. Qxd4               // next develop the queenside bishop and castle queenside, then pawn storm kingside 

    -------------------------------------------------------------------------------------- 
    --------------------------------------------------------------------------------------
    // DEFENSIVE SETUP, DEFENSIVE BISHOP 
    4... Be7 5. Bc4             // 6% - d3 scores a bit higher but positionally this looks better and more dynamic 